extends layout

block content
  div.jumbotron(style = "text-align: center;")
    //- canvas(id="gameCanvas" width="800" height="500" style="border:1px solid #d3d3d3; margin-left: 10%;")
  script(src = "/scripts/matter-js/build/matter.js" type="text/javascript")
    //-script(src = "/js/tankgame.js")
  script.
    var Engine = Matter.Engine,
        Render = Matter.Render,
        World = Matter.World,
        Bodies = Matter.Bodies,
        Composites = Matter.Composites;

    // create an engine
    var engine = Engine.create();

    // create a renderer
    var render = Render.create({
        element: document.body,
        engine: engine,
          options: {
            // makes it so the screen takes up entire width of page
                  width: document.documentElement.clientWidth,
                  height: Math.min(document.documentElement.clientHeight, 600),
                  showAngleIndicator: true,
              }
    });


    // engine.render.setBackground( engine.render, "white" );
    var pyramid = Composites.pyramid(500, 300, 9, 10, 0, 0, function(x, y) {
        return Bodies.rectangle(x, y, 25, 40);
    });
    var pageWidth = document.documentElement.clientWidth;
    // create two boxes and a ground.
    var boxA = Bodies.rectangle(400, 550, 80, 80, {isStatic: true});
    var boxB = Bodies.rectangle(450, 50, 80, 80);
    var wheel1 = Bodies.circle(400, 200, 10);
    var wheel2 = Bodies.circle(400, 200, 10);
    var scale = 0.9;
    var tank1 = Composites.car(150, 100, 100 * scale, 40 * scale, 30 * scale, {isStatic: true});
    scale = 0.8;
    var tank2 = Composites.car(300, 300, 100 * scale, 40 * scale, 30 * scale);
    // rectangle are (x, y, width, height).. position x and y in matter-js are the CENTER of the body
    var ground = Bodies.rectangle(pageWidth/2, 600, pageWidth, 60, { isStatic: true });

    // add all of the bodies to the world
    World.add(engine.world, [boxA, wheel1,wheel2, boxB, pyramid, tank1, tank2, ground]);

    // run the engine
    Engine.run(engine);

    // run the renderer
    Render.run(render);

  div.tank-city-talks
   p.hidden #{user.player_id}!
   p.hidden #{user.username}
   h2.tank-city-talks-title Tank City Talks
   div.messages
     table(id="messages")
       tbody
         each chat in chats
           tr
             td.lobby-message-username= chat.username + ":"
             td.lobby-message= chat.message
   form(action="/game" method="post")
     .input-group
       input.form-control(class='user-message-input' type='text', placeholder='Enter message' id='user-message-input' name='msg')
       span.input-group-btn
         button.btn.btn-default(class='btn btn-primary send-message' id='send-btn' style='width: 100px' type='submit' value='submit') Send
